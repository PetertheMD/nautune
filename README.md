# Nautune

Poseidon's cross-platform Jellyfin music player. Nautune is built with Flutter and complemented by a Swift-based CarPlay plugin so your library follows you across devices and dashboards.

## Highlights
- Deep Sea Purple experience defined in `lib/theme/nautune_theme.dart` and shared across every platform target.
- Linux-first development flow (Lubuntu/Kubuntu) with Codemagic handling iOS builds — no Snap or Android toolchain required to get started.
- Planned Swift CarPlay plugin housed under `plugins/` for tight integration with Jellyfin playback.
- Cross-device sync through GitHub via SSH to keep multiple workstations aligned.

## Roadmap
- [ ] Integrate Jellyfin authentication and media catalog browsing.
- [ ] Implement audio playback with background audio and media controls.
- [ ] Wire the Swift CarPlay plugin into the Flutter engine.
- [ ] Build a cohesive now-playing experience and queue management UI.
- [ ] Harden multiplatform builds (Linux, Windows, macOS, iOS, Web).

## Repository Layout
- `lib/` – Flutter application code. `main.dart` boots the app and applies the custom theme defined in `theme/`.
- `assets/` – Images, icons, and future audio assets (empty by default).
- `plugins/` – Home for the Swift CarPlay plugin and other federated platform modules.
- `android`, `ios`, `linux`, `macos`, `windows`, `web` – Platform-specific runners generated by Flutter.
- `test/` – Widget and unit tests (add coverage as features land).
- `analysis_options.yaml` – Static analysis rules (`flutter_lints`).

## Getting Started
1. Install Flutter (stable channel, revision `adc9010`, Dart SDK 3.9). Confirm with `flutter doctor`.
2. Clone the repository over SSH: `git clone git@github.com:<org>/nautune.git`.
3. From the project root, fetch dependencies: `flutter pub get`.
4. Run the Linux desktop build: `flutter run -d linux`. You should see the Nautune boot screen with the Deep Sea Purple theme.

> Tip: Development is Linux-only. Keep your environment Snap-free by using the official Flutter tarball or FVM and relying on Codemagic for iOS artifacts.

## Building for Other Platforms
- **iOS**: Builds are produced by Codemagic. Ensure the CarPlay Swift plugin is committed under `plugins/` so CI can bundle it. Refer to Codemagic workflow files (to be added) for signing and provisioning.
- **Windows / macOS**: Use `flutter build windows` or `flutter build macos` on their respective OSes once platform-specific prerequisites are installed.
- **Web**: `flutter run -d chrome` for rapid iteration, `flutter build web` to generate deployable assets.
- **Android**: Currently not a focus; no Android SDK or emulator is required for development.

## Development Guidelines
- Follow Dart/Flutter lints enforced by `analysis_options.yaml`. Run `flutter analyze` before pushing.
- Add unit/widget tests for new features: `flutter test`.
- Keep UI code declarative; centralize styling in `lib/theme/`.
- When integrating Jellyfin, isolate API work into a `lib/jellyfin/` module to keep UI layers clean.
- Document complex flows in the codebase with short comments so collaborators ramp up quickly.

## Contributing & Collaboration
- Work on feature branches synced over SSH. Open pull requests against `main` with a short demo or screenshots when UI changes.
- Coordinate multiplatform changes early (e.g., desktop shortcuts, CarPlay hooks) to avoid drift between Flutter and Swift components.
- Use descriptive commit messages and note any Codemagic considerations in PR descriptions.

## Next Steps
1. Define Jellyfin API client scaffolding and authentication flow.
2. Choose an audio playback engine (e.g., just_audio) and prototype media controls.
3. Scaffold the CarPlay plugin in `plugins/` and expose a Dart bridge for upcoming playback controls.
4. Draft Codemagic configuration files for automated iOS packaging.
